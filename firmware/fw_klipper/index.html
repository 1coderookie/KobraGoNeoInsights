<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Comprehensive information about Anycubic Kobra Go and Kobra Neo."><meta name=author content="Ulf Dieckmann"><link href=https://1coderookie.github.io/KobraGoNeoInsights/firmware/fw_klipper/ rel=canonical><link href=../fw_marlin/ rel=prev><link href=../../profiles/ rel=next><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.6"><title>Klipper (MOD) - KobraGoNeo Insights</title><link rel=stylesheet href=../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=brown data-md-color-accent=orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#klipper-mod class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="KobraGoNeo Insights" class="md-header__button md-logo" aria-label="KobraGoNeo Insights" data-md-component=logo> <img src=../../assets/favicon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KobraGoNeo Insights </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Klipper (MOD) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=brown data-md-color-accent=orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=brown data-md-color-accent=orange aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/1coderookie/KobraGoNeoInsights title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> 1coderookie/KobraGoNeoInsights </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../printers/ class=md-tabs__link> The Printers </a> </li> <li class=md-tabs__item> <a href=../../hardware/hw_index/ class=md-tabs__link> Hardware </a> </li> <li class=md-tabs__item> <a href=../introduction/ class="md-tabs__link md-tabs__link--active"> Firmware </a> </li> <li class=md-tabs__item> <a href=../../profiles/ class=md-tabs__link> Profiles & Slicers </a> </li> <li class=md-tabs__item> <a href=../../calibration/ class=md-tabs__link> Calibration </a> </li> <li class=md-tabs__item> <a href=../../troubleshooting/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../maintenance/ class=md-tabs__link> Maintenance </a> </li> <li class=md-tabs__item> <a href=../../printserver/ class=md-tabs__link> Printserver </a> </li> <li class=md-tabs__item> <a href=../../tools/ class=md-tabs__link> Tools </a> </li> <li class=md-tabs__item> <a href=../../further_sources/ class=md-tabs__link> Further Sources </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="KobraGoNeo Insights" class="md-nav__button md-logo" aria-label="KobraGoNeo Insights" data-md-component=logo> <img src=../../assets/favicon.png alt=logo> </a> KobraGoNeo Insights </label> <div class=md-nav__source> <a href=https://github.com/1coderookie/KobraGoNeoInsights title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> 1coderookie/KobraGoNeoInsights </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../printers/ class=md-nav__link> The Printers </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 tabindex=0 aria-expanded=false> Hardware <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Hardware data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Hardware </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../hardware/hw_index/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../hardware/frame/ class=md-nav__link> Frame </a> </li> <li class=md-nav__item> <a href=../../hardware/axes/ class=md-nav__link> Axes </a> </li> <li class=md-nav__item> <a href=../../hardware/bed/ class=md-nav__link> Bed </a> </li> <li class=md-nav__item> <a href=../../hardware/printhead/ class=md-nav__link> Printhead </a> </li> <li class=md-nav__item> <a href=../../hardware/mainboard/ class=md-nav__link> Mainboard </a> </li> <li class=md-nav__item> <a href=../../hardware/powersupply/ class=md-nav__link> Power Supply Unit </a> </li> <li class=md-nav__item> <a href=../../hardware/control_panel/ class=md-nav__link> Control Panel </a> </li> <li class=md-nav__item> <a href=../../hardware/filament_sensor/ class=md-nav__link> Filament Sensor </a> </li> <li class=md-nav__item> <a href=../../hardware/spare_parts/ class=md-nav__link> Spare Parts </a> </li> <li class=md-nav__item> <a href=../../hardware/other/ class=md-nav__link> Other </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 tabindex=0 aria-expanded=true> Firmware <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Firmware data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Firmware </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../introduction/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../fw_marlin/ class=md-nav__link> Stock Firmware (Marlin Based) </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Klipper (MOD) <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Klipper (MOD) </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#requirements class=md-nav__link> Requirements </a> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#special-functions class=md-nav__link> Special Functions </a> <nav class=md-nav aria-label="Special Functions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#g-codes class=md-nav__link> G-Codes </a> </li> <li class=md-nav__item> <a href=#macros class=md-nav__link> Macros </a> </li> <li class=md-nav__item> <a href=#z-offset class=md-nav__link> Z-Offset </a> <nav class=md-nav aria-label=Z-Offset> <ul class=md-nav__list> <li class=md-nav__item> <a href=#probes-z-offset class=md-nav__link> Probe's Z-Offset </a> </li> <li class=md-nav__item> <a href=#endstops-z-offset class=md-nav__link> Endstop's Z-Offset </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#abl-bed-mesh-manual-bed-leveling class=md-nav__link> ABL, Bed Mesh, Manual Bed Leveling </a> </li> <li class=md-nav__item> <a href=#pressure-advance class=md-nav__link> Pressure Advance </a> </li> <li class=md-nav__item> <a href=#resonance-compensation-input-shaping class=md-nav__link> Resonance Compensation: Input Shaping </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stock-control-unit class=md-nav__link> Stock Control Unit </a> </li> <li class=md-nav__item> <a href=#octoprint-mainsail-or-fluidd class=md-nav__link> OctoPrint, Mainsail or Fluidd? </a> <nav class=md-nav aria-label="OctoPrint, Mainsail or Fluidd?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#octoprint class=md-nav__link> OctoPrint </a> </li> <li class=md-nav__item> <a href=#mainsail class=md-nav__link> Mainsail </a> </li> <li class=md-nav__item> <a href=#fluidd class=md-nav__link> Fluidd </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../profiles/ class=md-nav__link> Profiles & Slicers </a> </li> <li class=md-nav__item> <a href=../../calibration/ class=md-nav__link> Calibration </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../maintenance/ class=md-nav__link> Maintenance </a> </li> <li class=md-nav__item> <a href=../../printserver/ class=md-nav__link> Printserver </a> </li> <li class=md-nav__item> <a href=../../tools/ class=md-nav__link> Tools </a> </li> <li class=md-nav__item> <a href=../../further_sources/ class=md-nav__link> Further Sources </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p><link rel=”manifest” href=”docs/manifest.webmanifest”></p> <p><a href=https://ko-fi.com/U6U5NPB51><img alt=ko-fi src=https://ko-fi.com/img/githubbutton_sm.svg></a> </p> <hr> <h1 id=klipper-mod>Klipper (MOD)<a class=headerlink href=#klipper-mod title="Permanent link">&para;</a></h1> <p>Can you run <a href=https://www.klipper3d.org/ >Klipper</a> on the stock mainboard of the <strong>Go</strong> and <strong>Neo</strong>?<br> Oh yes, you can! </p> <p>The <a href=https://github.com/Klipper3d/klipper/commit/72b6bd7efa1ae282220b4bdcfb789075807ebfd2>Huada HC32F460 MCU</a> is officially supported and implemented in the Klipper firmware. </p> <details class=tip> <summary>Important Information To Be Aware Of</summary> <ul> <li>It should already be mentioned here that you can always go back to the stock firmware by just re-flashing it, so you might just want to give Klipper a try. </li> <li>Be aware of the fact that the control unit and display of the printer doesn't work after flashing Klipper due to the fact that the SPI the unit is connected to isn't supported by Klipper yet. See the belonging section further down below for more information. </li> <li>You'd need a host to run additional software like OctoPrint or Mainsail for being able to use the printer with Klipper. See the belonging section further down below for some information and my personal recommendation abput what to use.<br> If you don't have a host running OctoPrint/Mainsail/.. yet, see the chapter <a href=../../printserver/ >"Printserver"</a> for some information about hardware you could use for that. </li> </ul> </details> <!---

## What Is Klipper?
Klipper is a 3d printer firmware and, in this case, *replaces* the stock firmware of your stock mainboard.  
For further information about Klipper, about how to install and configure it, please refer to the [official Klipper documentation](https://www.klipper3d.org/).   
--> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>In the following, I <strong>don't</strong> give a step-by-step guide about how to install and configure Klipper, so please read the official documentation attentively! </p> </div> <hr> <h2 id=requirements>Requirements<a class=headerlink href=#requirements title="Permanent link">&para;</a></h2> <p>If you want to use Klipper with your printer, you'll need additional hardware for having a host running Moonraker and Mainsail/Fluidd/Octoprint on, which then gets connected to the printer (which has to be flashed with the Klipper firmware of course). This doesn't has to be a RaspberryPi, pretty much every device you could run Linux on is suitable. Just use the <a href=https://github.com/th33xitus/kiauh>KIAUH</a> script for an easy installation of the belonging software like Moonraker and e.g. Mainsail. <br> <strong>Please see the chapter <a href=../../printserver/ >"Printserver"</a> for some hardware I listed which you could use for that.</strong> </p> <p>I'd like to mention that you don't necessarily need a host with a (touch) screen though, as the host is connected to your network and you'll access the UI of e.g. Mainsail through your browser (or by using an additional app on your smartphone or tablet, there are many ways to get in touch with your printer actually).<br> So just to make it clear: let's assume you have an old laptop laying around with maybe a broken screen, or you only have a limited amount of space and no place to put your old laptop with a working screen - you could use both ones just fine. Just connect the device to a power outlet, to your network and to your printer, put it somewhere on a shelf or wherever it suits you and you're good. <br> However, there are options to e.g. add a touchscreen to your host or use an old android device with e.g <a href=https://klipperscreen.readthedocs.io/en/latest/ >Klipper Screen</a> running and place it close to your printer, so that you have a control unit at the printer itself as well. But that absolutely isn't mandatory. </p> <hr> <h2 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">&para;</a></h2> <p><em>Credits to reddit user <a href=https://www.reddit.com/user/xpeng121/ >xpeng121</a> who initially posted how to get Klipper running on the <strong>Go</strong> and the <strong>Neo</strong>: <a href=https://www.reddit.com/r/anycubic/comments/10cwm16/install_klipper_on_kobra_go_or_neo/ >Install Klipper on Kobra Go or Neo</a>.</em> </p> <p>Basically you need to clone the Klipper repository and compile the necessary <code>klipper.bin</code> file (aka <code>firmware.bin</code>) which you flash onto the mainboard then. Please watch out for some dedicated tutorials about this procedure, as I don't offer a step by step guide here about it.<br> For further information about the installation steps please read the chapter <a href=https://www.klipper3d.org/Installation.html>"Installation"</a> of the official Klipper documentation. </p> <p>To build the correct firmware, use the following configuration during the setup process for creating the <code>klipper.bin</code> file: </p> <ul> <li>Micro-controller: Huada Semiconductor HC32F460</li> <li>Communication interface: Serial (PA3 &amp; PA2) - Anycubic </li> </ul> <p>You also now have two more options to choose from, the clock speed and the app address: </p> <ul> <li>The 200MHz option was added in June 2023, see <a href=https://github.com/klipper3d/klipper/pull/6291>hc32f460: Revert default clock back to 200MHz</a>.<br> Due to <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/jokubasver title="GitHub User: jokubasver">@jokubasver</a> findings described <a href=https://github.com/1coderookie/Klipper4KobraGoNeo/discussions/2#discussioncomment-6771797>here</a> it doesn't seem to be advisable to use the 200MHz setting right now. </li> <li>About the app address option: also that was added in June 2023. The option "0x10000" is for the Kobra 2 though, so it's <strong>not</strong> for us (Go/Neo) (see <a href=https://github.com/klipper3d/klipper/pull/6269>hc32f460: Add app address 0x10000</a>) - use the option "0x008000".</li> </ul> <p>The following screenshot provided by <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/jokubasver title="GitHub User: jokubasver">@jokubasver</a> shows the settings that should be used when choosing the options for compiling the <code>klipper.bin</code> file. </p> <p><img alt="Klipper compile settings" src=../../assets/images/klipper-compile-settings.png> </p> <details class=tip> <summary>Use KIAUH For Installation</summary> <p>If you're installing Klipper and frontends on <a href=../../printserver/#how-to-install>different hardware like a Raspberry Pi</a> and therefore don't use e.g. the MainsailOS image for the RPi, you can use <a href=https://github.com/th33xitus/kiauh>KIAUH</a>, which is an installation script for Klipper, KlipperScreen, frontends like Mainsail and so on. </p> </details> <details class=tip> <summary>Installing Frontends As A Docker Container</summary> <p>If you want to install frontends like e.g. Mainsail as a Docker container, check out the <a href=https://github.com/mkuf/prind>prind repository</a>.</p> </details> <p>Once you've created the <code>firmware.bin</code> file, copy it to the root directory (means, directly onto the card, not in a subfolder!) of your mSD card. I personally would suggest to remove all files from the mSD card and only copy the <code>firmware.bin</code> file onto it. </p> <p>Then you flash it as you would do with the stock firmware.<br> Means, you turn off the printer, put the card into the cardreader and turn on the printer. </p> <p>Note that the screen doesn't update though after the flash procedure is done as the control unit doesn't work with Klipper anymore. It might show the message <code>UpdateFirmware</code> (or something similar) and stick with it OR it doesn't show anything at all. Either one is fine - just wait 5-10min to make sure everything had time enough to be installed. </p> <p>Then turn off the printer, remove the card, connect your host which has OctoPrint/Mainsail/.. running with the printer using an USB-C cable and turn on the printer again.<br> If it doesn't boot the stock firmware now, you successfully flashed Klipper.<br> Now you should be able to connect OctoPrint/Mainsail/.. with the printer. If an error message pops up that no connection to the MCU was possible, click on "Restart Firmware" or turn off the printer and switch it on again. </p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <ul> <li>After flashing Klipper's <code>firmware.bin</code>, don't try to start printing right away! </li> <li>Keep in mind that even though the stock mainboard of the <strong>Go</strong> and the <strong>Neo</strong> is the same, you have to adjust certain settings of the file <code>printer.cfg</code> depending on your specific model <em>before</em> starting to print or calibrate the printer! So don't try to start printing right away! </li> <li>Proceed with the <a href=https://www.klipper3d.org/Config_checks.html>configuration checks</a> before you're trying to print anything! </li> <li>Make sure to adjust the offsets for both the <a href=https://www.klipper3d.org/Manual_Level.html#calibrating-a-z-endstop>z-endstop (command <code>Z_ENDSTOP_CALIBRATE</code>)</a> and the <a href=https://www.klipper3d.org/Probe_Calibrate.html#calibrating-probe-z-offset>probe (command <code>PROBE_CALIBRATE</code>)</a> as well - those are two independent steps and need to be done prior to printing! </li> </ul> </div> <hr> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h2> <p>Besides the <code>firmware.bin</code> of Klipper (aka <code>klipper.bin</code>) you also need a file named <code>printer.cfg</code> which contains the specific settings for your model. Please refer to the official Klipper documentation about <a href=https://www.klipper3d.org/Installation.html#configuring-klipper>configuring Klipper</a>. </p> <div class="admonition warning"> <p class=admonition-title>Preconfigured <code>printer.cfg</code> Files Available</p> <p>You can find preconfigured <code>printer.cfg</code> files for both the <strong>Neo</strong> in the belonging repository I set up for this: <a href=https://github.com/1coderookie/Klipper4KobraGoNeo>Klipper4KobraGoNeo</a>.<br> For the <strong>Go</strong> you also find a preconfigured file named <a href=https://github.com/Klipper3d/klipper/blob/master/config/printer-anycubic-kobra-go-2022.cfg><code>printer-anycubic-kobra-go-2022.cfg</code></a> within the official Klipper repository. </p> <p>Before you can start with the beforementioned tests to see if anything works correctly, you should check and adjust the settings in the file <code>printer.cfg</code> if necessary. <em>Don't start to print right away!</em> </p> </div> <p>I won't mention and explain all the settings here as you can just use the official documentation of Klipper to see what each setting means. </p> <p>However, there is one thing I'd like to point out right now as it's causing trouble if one doesn't check on that: the lines <code>include specific_filename_here.cfg</code> in some of the example <code>printer.cfg</code> files that are available. I'll go into detail about that in the section <a href=#include-additional-cfg>"include additional.cfg"</a>, so please make sure to read that section as well. </p> <div class="admonition warning"> <p class=admonition-title>Adjust The <code>cycle_time</code> For The Fans</p> <p>There is one specific setting I'd like to mention here though as it may cause problems if you don't adjust that. It's the setting <code>[fan]</code> for the part cooling fan.<br> So, in the file <code>printer.cfg</code> there is a section for the settings of the fans. Klipper is using software PWM by default, the default frequency here seems to be 100Hz.<br> However, users reported dying part cooling fans shortly after switching to Klipper (you can find one of the discussions <a href=https://github.com/1coderookie/Klipper4KobraGoNeo/discussions/2>here</a>). This problem seems to be related to the default PWM frequency.<br> After investiganting the problem it seems that <a href=https://github.com/1coderookie/Klipper4KobraGoNeo/discussions/2#discussioncomment-5626026>the fan runs at 20kHz</a> when using the stock firmware as <a href=https://github.com/xiaopeng12138>@xiaopeng12138</a> found out. So I'd recommend to change the belonging setting for the part cooling fan to the specific "cycle_time" value "0.000050" which is 20kHz if it's not already set in the specific <code>printer.cfg</code> you're using. </p> <p>This is the belonging section and the setting for the part cooling fan:<br> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>[fan]
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>pin: PB5
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>cycle_time: 0.000050
</code></pre></div></p> </div> <hr> <h2 id=special-functions>Special Functions<a class=headerlink href=#special-functions title="Permanent link">&para;</a></h2> <p>In the following I'll list some of the special functions which make Klipper so interesting and outstanding compared to the stock firmware, besides the fact that you can adjust the firmware settings to your own needs. </p> <hr> <h3 id=g-codes>G-Codes<a class=headerlink href=#g-codes title="Permanent link">&para;</a></h3> <p>Klipper uses <strong>extended g-codes</strong>.<br> Therefore one has to be aware of the fact that not all of the 'regular' G-code commands are known and useable within Klipper.<br> See the <a href=https://www.klipper3d.org/G-Codes.html>g-codes chapter</a> of the official Klipper documentation for an overview of the specific commands. </p> <details class=tip> <summary>Slicer Setting: G-Code Flavour</summary> <p>Look out for a setting in your slicer called something like "G-Code Flavour". If it's available, set the flavour to "Klipper".<br> In PrusaSlicer you can find this setting under "Printer Settings" -&gt; "General" -&gt; "Firmware" (you need to have "Expert" mode activated to get access to that option!). The following screenshot shows that setting.<br> <img alt="G-code flavour" src=assets/images/g-code_flavour.png> </p> </details> <hr> <h3 id=macros>Macros<a class=headerlink href=#macros title="Permanent link">&para;</a></h3> <p>You can also use <strong>macros</strong> in Klipper.<br> Basically a macro is a collection of g-code commands Klipper should execute.<br> This macro is created and saved as an own file one calls in the <code>printer.cfg</code> then with the <code>[include]</code> command.<br> You can set up your own macros to set up certain routines like when you want to change filament midprint or to e.g. use scripts to do automatic backups of your Klipper configs. </p> <p>Instead of creating one file for each macro and call it, you can also create only one file and put all of the macros in there - then you simply have to call that one specific file in the <code>printer.cfg</code>.<br> As an example: you create a file called <code>gcode.cfg</code> where you list all the macros with the specific commands and then you simply add <code>[include gcode.cfg]</code> to your <code>printer.cfg</code>. You can see an example of such a <code>gcode.cfg</code> file in my <a href=https://github.com/1coderookie/Klipper4KobraGoNeo/blob/main/includes/1coderookie_gcode.cfg>Klipper4KobraGoNeo repository here</a>. </p> <p><em>Please read the expandable textboxes below for some further explanations about the <code>[include additional.cfg]</code> command!</em> </p> <details class=info> <summary>Include Additional.cfg</summary> <p>You can include additional config files from the main printer config file as well by adding this command line to the start of the <code>printer.cfg</code> file: <code>[include additional.cfg]</code>, where "additional" will be replaced with the specific filename then.<br> In this "additional" config file you can list certain macros you created or you can list certain settings which will be loaded during the startup of Klipper.<br> By doing so, you not only keep your main <code>printer.cfg</code> short and easier to read, but you can also activate or deactivate loading certain settings for example by commenting or commenting out the specific "include" line.<br> Usually one does this for calling a macro from the start-gcode section of your slicer. If you are using <a href=https://github.com/1coderookie/Klipper4KobraGoNeo/blob/main/cfg/NEO_1coderookie_printer.cfg>my <code>printer.cfg</code> for the Neo</a>, then you'll see the line <code>#[include gcode.cfg]</code> at the beginning of that file. Then you also add the file <a href=https://github.com/1coderookie/Klipper4KobraGoNeo/blob/main/includes/1coderookie_gcode.cfg><code>gcode.cfg</code></a> to the location of your Klipper installation where the <code>printer.cfg</code> is located (make sure to rename the file to <code>gcode.cfg</code>) and remove the hashtag of the abovementioned <code>[include gcode.cfg]</code> line. Then add the belonging command in your slicers start-gcode section as mentioned in that file to have it executed at the start of your print. </p> <p>Attention though: you <em>need to have</em> that config file (which you referred to in that include line) existent though - if you don't have the file, Klipper won't start and reports an error message instead. </p> <p>This might sound a bit confusing right now, so I'll try to clarify this with an example: <br> Imagine you want to use an additional Raspberry Pico with an ADXL345 sensor later for measuring resonances for Input Shaping. So you set up the hardware and then you create a file named <code>adxl345.cfg</code> for example. In this file you have all the settings for the set up hardware. In the main <code>printer.cfg</code> you add the line <code>#[include adxl345.cfg]</code> at the top.<br> Right now this file won't be loaded and executed, because you commented it with the hashtag right before the square bracket. So when you want to use the Pico with the sensor now and you plug it into the host Klipper is running on, you comment out the file by removing the hashtag, which "activates" the command and makes Klipper look out for this specific file to load during the start. Once you're done with the measuring and unplug the Pico again, you comment that line again by adding the hashtag, which 'deactivates' the command to look out for that specific file and load it.<br> If you <em>don't</em> do this and try to boot Klipper without the Pico being connected, Klipper won't start and reports an error message instead. Same goes for the case that you don't have that <code>adxl345.cfg</code> file existent and try to execute that include command. </p> </details> <details class=warning> <summary>Important Note On Include Files</summary> <p>The reason I'm going over this here is that in some <code>printer.cfg</code> files you can find there are certain <code>[include whatever.cfg]</code> lines already being listed. If you then try to use that printer config file but you don't have that specific files which should be included (or the hardware being referred to in that file isn't connected, like in the abovementioned example about the Pico), Klipper won't start and will report an error message instead. </p> <p>The following screenshot shows an error report because of the missing file <code>fluidd.cfg</code> in the active line <code>[include fluidd.cfg]</code>.<br> <img alt="Missing include file" src=../../assets/images/fw_klipper_include-missing.png><br> To get rid of this error message, either 'deactivate' that line like this <code>#[include fluidd.cfg]</code> or create the belonging file <code>fluidd.cfg</code>. </p> <p>So whenever you use a printer config file from someone else, check if any <code>[include whatever.cfg]</code> lines are existent. If so, either delete those lines, 'deactivate' them by adding a hashtag right before that square bracket like this: <code>#[include whatever.cfg]</code> or lookout for / create the belonging config file. </p> </details> <p>You can then either run those macros by </p> <ul> <li>typing in the belonging shell command (which would be the macro's name) in the Mainsail UI console terminal for having that macro executed,</li> <li>adding a button to the Mainsail UI which you can simply click on for having the macro executed or</li> <li>have a macro executed automatically by adding that command to your slicer's gcode (e.g. you want to have a macro for a purge line be executed automatically before a print starts - add that macro's name to the start g-code section). </li> </ul> <p>As I can't go into further details here, I'd highly recommend to read around about macros. To make the research easier for you, here are some links you can start with: </p> <ul> <li>The description about <a href=https://www.klipper3d.org/Command_Templates.html>commands templates</a> in the official documentation.</li> <li><strong>The article <a href=https://all3dp.com/2/klipper-macros-simply-explained/ >"Klipper: Macros - Simply Explained"</a> at all3dp.com which gives a nice and short overview about how macros work.</strong></li> <li><strong>The detailed article <a href=https://www.obico.io/blog/klipper-macros/#what-are-klipper-macros>"Klipper Macros - What They Are and How to Use Them"</a> at the Obicio blog.</strong></li> <li>The article <a href=https://docs.vorondesign.com/community/howto/voidtrance/Klipper_Macros_Beginners_Guide.html>"Voidtrance Klipper Macros Beginners Guide</a> of the Voron Design community.</li> <li>The <a href=https://klipper.discourse.group/t/macro-creation-tutorial/30>"Macro Creation Tutorial"</a> at Klipper's discourse group.</li> <li>The <a href=https://github.com/jschuh/klipper-macros>collection of Klipper macros</a> by <a href=https://github.com/jschuh>Justin Schuh</a>. </li> </ul> <hr> <h3 id=z-offset>Z-Offset<a class=headerlink href=#z-offset title="Permanent link">&para;</a></h3> <p>There are <em>two</em> z-offsets you need to set: </p> <ul> <li>the probe's z-offset (distance of the probe to the PEI plate) and</li> <li>the z-offset in relation to the z-endstop, which is the z-offset you already know from setting at the the stock firmware and <strong>which comes into account when printing the initial layer</strong>. </li> </ul> <p>For doing so, you have to execute two different commands while you're proceeding the <a href=https://www.klipper3d.org/Config_checks.html>configuration checks</a>: </p> <ul> <li><a href=https://www.klipper3d.org/Probe_Calibrate.html#calibrating-probe-z-offset><code>PROBE_CALIBRATE</code> for setting the z-offset of the probe</a> and</li> <li><a href=https://www.klipper3d.org/Manual_Level.html#calibrating-a-z-endstop><code>Z_ENDSTOP_CALIBRATE</code> for setting the z-offset for the initial layer</a>.</li> </ul> <p>Please click on the links and read the official documentation about these commands and how to proceed. </p> <div class="admonition warning"> <p class=admonition-title>Wait For The Printhead Being Moved</p> <p>When executing the abovementioned commands, you need to move the <em>probe</em> to the center of the bed by typing in the specific X and Y coordinates. As an example, I have to move my head to X=72.5 and Y=106 for having the <em>probe</em> right above the center of the bed.<br> Once done with that, you then type in the belonging command for starting the actual calibration process. The head will move down a bit until the probe detects the PEI plate.<br> Once the surface has been detected, a little window will pop up (referring to the Mainsail UI here) which allows you to change the Z position.<br> <strong>BUT - and this is CRUCIAL! - the head will start to slowly move sidewards in this moment to position the nozzle right above the point where the probe has been located!</strong> <strong><em>You need to WAIT for this movement to be done!</em></strong> <strong>So inspect the head and wait until it doesn't move anymore before adjusting the actual height!</strong></p> </div> <p>In the follwing, I'll just give you a short overview about these two kinds of z-offset to show you what the differences are and why you need to set both of them. </p> <hr> <h4 id=probes-z-offset>Probe's Z-Offset<a class=headerlink href=#probes-z-offset title="Permanent link">&para;</a></h4> <p>The z-offset during <a href=https://www.klipper3d.org/Probe_Calibrate.html#calibrating-probe-z-offset><code>PROBE_CALIBRATE</code> is the z-offset of the probe to the bed</a>.<br> It doesn't have an influence on the initial layer, but it's needed for e.g. the correct visual output of the graphical bedmesh later. So here you let Klipper know how far the probe is away from the plate.</p> <details class=warning> <summary>Wait For The Printhead Being Moved</summary> <p>When executing the abovementioned commands, you need to move the <em>probe</em> to the center of the bed by typing in the specific X and Y coordinates. As an example, I have to move my head to X=72.5 and Y=106 for having the <em>probe</em> right above the center of the bed.<br> Once done with that, you then type in the belonging command for starting the actual calibration process. The head will move down a bit until the probe detects the PEI plate.<br> Once the surface has been detected, a little window will pop up (referring to the Mainsail UI here) which allows you to change the Z position.<br> <strong>BUT - and this is CRUCIAL! - the head will start to slowly move sidewards in this moment to position the nozzle right above the point where the probe has been located!</strong> <strong><em>You need to WAIT for this movement to be done!</em></strong> <strong>So inspect the head and wait until it doesn't move anymore before adjusting the actual height!</strong></p> </details> <p><em>Once done, click on "ACCEPT" - and just to be on the safe side, send a <code>SAVE_CONFIG</code> command as well.</em> </p> <hr> <h4 id=endstops-z-offset>Endstop's Z-Offset<a class=headerlink href=#endstops-z-offset title="Permanent link">&para;</a></h4> <p>With <a href=https://www.klipper3d.org/Manual_Level.html#calibrating-a-z-endstop><code>Z_ENDSTOP_CALIBRATE</code> you set the z-offset of the nozzle to the bed in relation to the endstop</a>, <strong>which is the one that comes into account when starting a print.</strong><br> It tells your Klipper which distance needs to be between the nozzle and triggering the endstop for printing the initial layer. </p> <details class=warning> <summary>Wait For The Printhead Being Moved</summary> <p>When executing the abovementioned commands, you need to move the <em>probe</em> to the center of the bed by typing in the specific X and Y coordinates. As an example, I have to move my head to X=72.5 and Y=106 for having the <em>probe</em> right above the center of the bed.<br> Once done with that, you then type in the belonging command for starting the actual calibration process. The head will move down a bit until the probe detects the PEI plate.<br> Once the surface has been detected, a little window will pop up (referring to the Mainsail UI here) which allows you to change the Z position.<br> <strong>BUT - and this is CRUCIAL! - the head will start to slowly move sidewards in this moment to position the nozzle right above the point where the probe has been located!</strong> <strong><em>You need to WAIT for this movement to be done!</em></strong> <strong>So inspect the head and wait until it doesn't move anymore before adjusting the actual height!</strong></p> </details> <p><em>Once done, click on "ACCEPT" - and just to be on the safe side, send a <code>SAVE_CONFIG</code> command as well.</em> </p> <div class="admonition warning"> <p class=admonition-title>This Is The Z-Offset For The Initial Layer!</p> <p><strong><em>This</em></strong> <strong>z-offset is the one which comes into account when printing the initial layer</strong> - you know this one from using the stock firmware and setting the z-offset there. </p> </div> <div class="admonition warning"> <p class=admonition-title>Attention When Adjusting The Z-Offset On The Fly</p> <p><em>If you adjust your z-offset on the fly while printing your <strong><em>initial layer</em></strong>, you need to save that value to the <strong><em>endstop</em></strong> (not to the probe!) for having it applied the next times.</em><br> At the Mainsail UI for example there's a little button you can use for saving the changes you made while adjusting the offset on the fly. It shows a floppy disk symbol next to "SAVE" and a small arrow next to it. When you click on that arrow, a context menu opens up and you can choose whether to save your changes to the probe or the endstop as the following screenshot shows. <br> <img alt="Mainsail UI save offset button" src=../../assets/images/mainsail_save-z-offset.jpg><br> So when doing so, choose "TO ENDSTOP" for saving the new z-offset value for printing your perfect first layer next time. After doing so, execute a "SAVE_CONFIG". </p> </div> <details class=tip> <summary>Using The Probe As A Virtual Endstop</summary> <p>As mentioned, we have two different z-offsets here, due to the fact that we do have a probe and a z-axis limit switch. Therefore you have to set two different z-offsets as explained above.<br> Some users prefer to only set one z-offset value and use the probe as a virtual endstop for the z-axis and not using the z-axis limit switch at all. You can do so by adding the following line in the section <code>[stepper_z]</code> of your <code>printer.cfg</code>:<br> <code>endstop_pin: probe:z_virtual_endstop</code> </p> <p><em>I personally wouldn't recommend to do so though.</em> <br> The reason is simple: users already reported faulty probes, mostly due to broken wirings being caused by cableties being too tight.<br> Imho it's also more likely that the probe is getting somehow defective than the z-axis limit switch, as the probe is mounted to a moving part (the printhead). In that case the printer would drive the nozzle into the bed not only when executing an ABL measurement / bed mesh, but also when homing or starting a print. So keep that in mind and consider that risk when thinking about using the probe as a virtual z-endstop. </p> </details> <hr> <h3 id=abl-bed-mesh-manual-bed-leveling>ABL, Bed Mesh, Manual Bed Leveling<a class=headerlink href=#abl-bed-mesh-manual-bed-leveling title="Permanent link">&para;</a></h3> <p>Before I go into further details here, let me mention some of the (imho) most important advantages of Klipper compared to the stock firmware when it comes down to the ABL functionality: </p> <ul> <li>You can set the offset of the ABL sensor!<br> In the stock firmware, the offset of the probe's location isn't set correctly, therefore the compensation while printing isn't actually as precise as possible. As an example: the probe is located 37.5mm to the right and 4mm to the back in relation to the nozzle at the <strong>Neo</strong> (when looking at the printhead from the front). In the stock firmware, there's only the x-offset being set, the y-offset is not. That leads to the circumstance that the printer assumes that the nozzle and the probe are actually llined up - therefore the corrections being applied while compensating during printing just don't fit as much as they could, because the printer is compensating for a value which is 4mm off to the actual location of the nozzle. </li> <li>You can set the amount of probed points as well as the algorithm of the probing, so you don't have to stick with the 5x5 grid.</li> <li>You can set the area where the probing should occur in general.</li> <li>You can even use certain macros which allow you to only probe the area you're going to print at before each print you're attempting.</li> <li>You can create different bedmeshes for e.g. different bed temperatures which you can then load when printing different types of filament (like one bedmesh done at 60°C bedtemp for PLA and one done at 80°C bedtemp for PETG and so on).</li> <li>You can do a bedmesh at any time without the need of setting the z-offset again (of course only in case you didn't change anything that had an impact on the z-offset, like tramming the bed or so). </li> </ul> <p>Of course Klipper supports both ABL and manual bed leveling as well. Please see the official Klipper documentation for more detailed information about this topic, I'll only mention some notes about it here in the following. So before you continue to read here, maybe check out the official Klipper documentation first and read the chapters <a href=https://www.klipper3d.org/Config_Reference.html#bed-level-support>"Bed Level Support"</a> and <a href=https://www.klipper3d.org/Bed_Level.html>"Bed Level"</a>. </p> <p>After executing an ABL sequence, you need to save those results for having them written to your <code>printer.cfg</code> file - they <em>won't</em> be saved automatically!<br> You can either choose an individual name or just save it as "default". </p> <p>However, for loading the values and to get ABL to work while printing, you need to add a specific command to your <code>[gcode_macro START_PRINT]</code> file to load the bed mesh profile. This command <code>BED_MESH_PROFILE LOAD=...</code> has to be added <em>after</em> the last G28 (home the printer) command in there, with the belonging name of the mesh that should be loaded.<br> Here's an example of how it looks like with the belonging command for a bed mesh saved as "default". </p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a># Home the printer 
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>G28
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a># Load default bed mesh profile
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>BED_MESH_PROFILE LOAD=default
</code></pre></div> <p>If you chose individual names for different bed meshs (e.g. "mesh1"), you need to name the specific one you want to be loaded then in the abovementioned command (e.g. <code>BED_MESH_PROFILE LOAD=mesh1</code>).<br> If you saved the mesh using the "default" name like it's being suggested by the UI, enter the name "default" as shown above. </p> <p>You can create different bedmeshs for e.g. different bed temperatures by using different names and load them automagically using e.g. the belonging name of the filament type being set in the Slicer. Means, you set the filament type in your Slicer and add a certain entry in the start g-code section of the Slicer, so that the filament type will be written into the generated g-code file. In addition to that you then write a macro for Klipper which then loads the belonging bedmesh for the type of filament being used, like the bedmesh you did at 60°C bed temperature for printing PLA or the one you did at 80°C for printing PETG. </p> <p>You can configure the ABL procedure within your <code>printer.cfg</code> as well so that it fits your needs.<br> Means, you can change the amount and location of probing points, the probing speed and the amount of probes for each probing point. You can also choose between different probe algorithms. </p> <p>As an example, this is the belonging section <code>[bed_mesh]</code> in the <code>printer.cfg</code> file:<br> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>[bed_mesh]
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>speed: 400
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>horizontal_move_z: 7
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>mesh_min: 32, 26
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>mesh_max: 189, 189
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>probe_count: 5, 5
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>relative_reference_index: 13
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>algorithm: lagrange
</code></pre></div> Please see the <a href=https://www.klipper3d.org/Config_Reference.html#bed_mesh>configuration reference for the bed mesh</a> for more detailed information. </p> <p>When you did everything correct, you can observe the ABL compensation working, as you can see in the following screencast of the Mainsail UI. Look at the changing value in those square brackets of the Z axis, right above the "Z 4.480" value.<br> <img alt="Working ABL" src=../../assets/images/abl-working-klipper.gif> </p> <details class=tip> <summary>Probe Count And Mesh Min/Max</summary> <p>As we have an inductive proximity sensor which has some sort of 'wide' probe surface and not a pointy one like a BL-Touch probe for example, it's advisable to not probe too close to the bed's borders and to not use too many probe counts, so that the probing will be reliable. </p> </details> <p>There are also solutions to do a bedmesh before every print which probe the specific area you're going to print on. So instead of probing the whole bedplate, only the belonging area will be probed: </p> <ul> <li><a href=https://github.com/kyleisah/Klipper-Adaptive-Meshing-Purging>Klipper Adaptive Meshing &amp; Purging</a> </li> <li><a href=https://gist.github.com/ChipCE/95fdbd3c2f3a064397f9610f915f7d02>Klipper mesh on print area only install guide</a></li> </ul> <p>Besides that, you can also use manual bed leveling in addition to the ABL, see the belonging description in the official Klipper documentation <a href=https://www.klipper3d.org/Manual_Level.html>here</a>.<br> This is especially useful for people who replaced the stock spacers of the bed with <a href=../hardware/bed/#different-spacers>adjustable spacers</a> for being able to tram the bed itself as well. </p> <p>I'd suppose to also read the description of the function <a href=https://www.klipper3d.org/Manual_Level.html#adjusting-bed-leveling-screws-using-the-bed-probe>"screws_tilt_adjust" with the command "SCREWS_TILT_CALCULATE"</a>, which tells you exactly how much and in which direction you have to turn each screw to tram the bed (after configuring it for your printer) by using the probe. </p> <hr> <h3 id=pressure-advance>Pressure Advance<a class=headerlink href=#pressure-advance title="Permanent link">&para;</a></h3> <p>By using Klipper you can take advantage of using a feature called "Pressure Advance". <br> Basically this function looks ahead while printing and adjusts the pressure of the filament, so that the typical over- and underextrusion at the beginning and end of a layer you often experience will be avoided. </p> <p>This feature (called "Linear Advance" at Marlin firmware) can't be successfully used with the current stock firmware and the TMC2208 stepper drivers, so this is actually a huge plus for Klipper. </p> <p>Please refer to the official Klipper documentation of <a href=https://www.klipper3d.org/Pressure_Advance.html>Pressure Advance</a> about how to calibrate and use it. </p> <hr> <h3 id=resonance-compensation-input-shaping>Resonance Compensation: Input Shaping<a class=headerlink href=#resonance-compensation-input-shaping title="Permanent link">&para;</a></h3> <p>By using Klipper you can take advantage of using Resonance Compensation and a feature called "Input Shaping".<br> This function compensates certain resonances (after provoking them while measuring the x and y axis), which avoids artefacts of the printed model called 'ringing' and 'ghosting'. This is especially useful when printing at higher speeds.<br> You can calibrate it manually or by using additional hardware like ADXL345 acceleration sensors (recommended). </p> <p>(..add images of ADXL solutions..)</p> <p>Please refer to the official Klipper documentation of <a href=https://www.klipper3d.org/Resonance_Compensation.html#resonance-compensation>Resonance Compensation</a> about how to calibrate and use it.</p> <hr> <h2 id=stock-control-unit>Stock Control Unit<a class=headerlink href=#stock-control-unit title="Permanent link">&para;</a></h2> <p>The stock control unit of both the <strong>Go</strong> and the <strong>Neo</strong> <em>don't</em> work with Klipper, means, you can't use it for <em>controlling</em> the printer.<br> So is that going to be an issue? Actually I thought the same initially and that was the only reason which was holding me back switching to Klipper right away at the beginning. Now that I did switch, I can say that I don't really miss the control unit. </p> <p>Just as an example: </p> <ul> <li>Klipper <em>keeps</em> the z-offset, so you don't have to fiddle around at the control unit for that before each and every print because the stock-fw forgot your settings once again. </li> <li>Setting temps for e.g. heating up the hotend to change a nozzle or load/unload filament can be done by using Mainsail. </li> <li>Initiating the ABL procedure is also be done through Mainsail, just like everything else. </li> </ul> <p>However, if you really do miss the option to <em>control the printer</em> right at that place later, you have several options to do so: </p> <ul> <li>You can use your smartphone, tablet or laptop to just open the mainsail.local page at your browser and use the regular Mainsail frontend (which might be a bit 'uncomfortable' when using a smartphone though). </li> <li>You can use an old smartphone or tablet and install <a href=https://klipperscreen.readthedocs.io/en/latest/ >KlipperScreen</a> onto it, which then gives you a nice adapted UI with control buttons. <br> I also set it up, printed a holder for it and mounted it where the original control unit was as shown in the picture below. <br> <img alt="KlipperScreen Smartphone" src=../../assets/images/KlipperScreen-smartphone_web.jpg> <br> Actually I unplugged the phone again as I just control the printer via my computer and the mainsail.local page anyway though. It also kinda bothers me that I have to boot up the phone all the time as I don't leave the printer on 24/7, so I'll probably go with the next solution I'll mention. </li> <li>If you have a Raspberry Pi or other hardware you could connect a touchscreen to (e.g. by using a HMDI port) running for hosting Mainsail, you can add a touchscreen to that and use <a href=https://klipperscreen.readthedocs.io/en/latest/ >KlipperScreen</a>. It's the same UI like using a smartphone or tablet. <br> This is actually a quite handy solution if you're using a RPi as you can set everything up in a dedicated case. I'll probably do that as well, just for the pure comfort of not having to take care about switching the smartphone on and off as the display is powered by the RPi. I just didn't want to spend money again when trying Klipper initially, that's why I used an old smartphone in first place. </li> </ul> <p><em>There is another use case for the stock control unit though: @<a href=https://github.com/jokubasver>jokubasver</a> managed to use the stock control unit as a screen!</em><br> You need to wire it up to your RPi and have KlipperScreen running. As the stock control unit isn't a touchscreen and the knob isn't supported in KlipperScreen for operating/controlling Klipper, the unit only acts as a pure display, but at least you'll be able to use it and have the advantage of having certain status information present. The following picture shows this solution. </p> <p><img alt="Stock unit for KlipperScreen" src=../../assets/images/stock-display_klipperscreen_jokubasver_web.jpg> </p> <p>You can find his solution in the following GitHub repository: <a href=https://github.com/jokubasver/Anycubic-Kobra-Go-Neo-LCD-Driver>https://github.com/jokubasver/Anycubic-Kobra-Go-Neo-LCD-Driver</a> </p> <hr> <h2 id=octoprint-mainsail-or-fluidd>OctoPrint, Mainsail or Fluidd?<a class=headerlink href=#octoprint-mainsail-or-fluidd title="Permanent link">&para;</a></h2> <p>To find out what's the best solution for you, either do a little research on that, watch some YouTube videos or just get another mSD card for your RPi, install e.g. MainsailOS onto it and then just give it a try.<br> Due to the fact that I personally use and recommend Mainsail, I'll always refer to it when it comes down to describe or show certain things in this chapter. </p> <hr> <h3 id=octoprint>OctoPrint<a class=headerlink href=#octoprint title="Permanent link">&para;</a></h3> <p>OctoPrint is mentioned and referred to at the Klipper page, so you can use it just fine.<br> You'd need to SSH to the host (e.g. the RPi) to upload edited files like the <code>printer.cfg</code> though - if there isn't a plugin for that which allows you to do so within the interface of OctoPrint (I don't know actually). </p> <hr> <h3 id=mainsail>Mainsail<a class=headerlink href=#mainsail title="Permanent link">&para;</a></h3> <p>I personally prefer to use Mainsail with Klipper as it's tailored for Klipper and gives you more tools made for Klipper right away.<br> Just to mention a few here: </p> <ul> <li>You can edit the <code>printer.cfg</code> and every other file just directly within Mainsail and don't have to SSH to the Raspberry Pi. </li> <li>You already have a heightmap function included which allows you to create and display the meshview after executing an ABL. </li> <li>If your slicer does support it (SuperSlicer does), you can have thumbnails of your models displayed. </li> <li>There's also a G-Code viewer already built in. </li> <li>You have the possibilty to create custom macros and add scripts for e.g. executing backups and activate them with one click. </li> <li>And much more.. </li> </ul> <p>Please see the <a href=https://docs.mainsail.xyz/ >official documentation site</a> for further information. </p> <p>(add screenshot)</p> <hr> <h3 id=fluidd>Fluidd<a class=headerlink href=#fluidd title="Permanent link">&para;</a></h3> <p>Fluidd is kinda similar to Mainsail, so it's a great alternative if you don't want to use Mainsail. Please see the <a href=https://docs.fluidd.xyz/ >official documentation site</a> for further information. </p> <p>The following screenshot shows the dashboard overview of Fluidd (without a camera for monitoring the printer being used). </p> <p><img alt="Fluid UI" src=../../assets/images/fluidd_screenshot.png></p> <hr> <p><a href=https://ko-fi.com/U6U5NPB51><img alt=ko-fi src=https://ko-fi.com/img/githubbutton_sm.svg></a> </p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../fw_marlin/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Stock Firmware (Marlin Based)" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Stock Firmware (Marlin Based) </div> </div> </a> <a href=../../profiles/ class="md-footer__link md-footer__link--next" aria-label="Next: Profiles & Slicers" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Profiles & Slicers </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023-2025 Ulf Dieckmann [ 3dneo (at) quantentunnel.de ] | <a href=https://www.flaticon.com/free-icons/3d-printer title="3d printer icons">3d printer icon created by Freepik - Flaticon</a> <br> If you find this page useful, please consider recommending it to others. This will make the community aware of this page and help other users. Thank you! </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.expand", "navigation.footer", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.51d95adb.min.js></script> </body> </html>